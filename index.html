<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Restaurant</title>

    <!-- Tipografias -->
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Poppins:wght@400;600&display=swap"
        rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Lato:wght@300;400;700&display=swap"
        rel="stylesheet">

    <!-- Bootstrap e iconos -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

    <!-- Estilos personalizados -->
    <link rel="stylesheet" href="css/principal.css">
    <link rel="stylesheet" href="css/categoria_tarjetas.css">
    <link rel="stylesheet" href="css/usuario.css">
    <link rel="stylesheet" href="css/ver_reservas.css">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">

    <!-- Librerias JS -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>

</head>

<body>
    <div id="blur-overlay"></div>
    <header class="main-header">
        <!-- Menú de navegación -->
        <nav class="navbar navbar-expand-lg navbar-dark bg-transparent">
            <div class="container">
                <a class="navbar-brand" href="/inicio/">
                    <i class="fas fa-dragon me-2"></i>El dragón del valle imperial
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMenu">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarMenu">
                    <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                        <!-- Inicio -->
                        <li class="nav-item">
                            <a class="nav-link active" href="/inicio/">
                                <i class="bi bi-house-door me-1"></i>Inicio
                            </a>
                        </li>

                        <!-- Carta -->
                        <li class="nav-item dropdown">
                            <a class="nav-link d-flex justify-content-between align-items-center" href="#">
                                <span><i class="bi bi-card-list me-1"></i> Carta</span>
                                <i class="bi bi-chevron-down toggle-icon"></i>
                            </a>
                            <ul class="submenu">
                                <li><a class="dropdown-item" href="/menu/parrilla/"><i class="bi bi-fire"></i>
                                        Parrilla</a></li>
                                <li><a class="dropdown-item" href="/menu/entrada/"><i class="bi bi-egg-fried"></i>
                                        Entradas</a></li>
                                <li><a class="dropdown-item" href="/menu/ensalada/"><i class="bi bi-basket"></i>
                                        Ensaladas</a></li>
                                <li><a class="dropdown-item" href="/menu/pasta/"><i class="bi bi-basket3-fill"></i>
                                        Pastas</a></li>
                                <li><a class="dropdown-item" href="/menu/postre/"><i class="bi bi-cup-hot"></i>
                                        Postres</a></li>
                                <li><a class="dropdown-item" href="/menu/bebida/"><i class="bi bi-cup-straw"></i>
                                        Bebidas</a></li>


                                <li><a class="dropdown-item" href="/agregar/"><i class="bi bi-plus-circle"></i> Agregar
                                        Platillo</a></li>

                            </ul>
                        </li>

                        <!-- Reservar -->
                        <li class="nav-item">
                            <a class="nav-link " href="/realizar-reserva/">
                                <i class="bi bi-calendar-check me-1"></i> Reservar
                            </a>
                        </li>

                        <!-- Reservas admin -->

                        <li class="nav-item">
                            <a class="nav-link " href="/reservas/">
                                <i class="bi bi-list-check"></i> Reservas
                            </a>
                        </li>


                        <!-- Empleados -->

                        <li class="nav-item dropdown">
                            <a class="nav-link d-flex justify-content-between align-items-center" href="#">
                                <span><i class="bi bi-people-fill me-1"></i> Empleados</span>
                                <i class="bi bi-chevron-down toggle-icon"></i>
                            </a>
                            <ul class="submenu">
                                <li><a class="dropdown-item" href="/empleados/"><i class="bi bi-eye"></i> Ver
                                        Empleados</a></li>
                                <li><a class="dropdown-item" href="/empleados/agregar/"><i
                                            class="bi bi-person-plus"></i> Agregar Empleado</a></li>
                            </ul>
                        </li>


                        <!-- Información -->
                        <li class="nav-item">
                            <a class="nav-link " href="/informacion/">
                                <i class="bi bi-info-circle me-1"></i> Información
                            </a>
                        </li>

                        <!-- Accesibilidad -->
                        <li class="nav-item">
                            <a class="nav-link " href="/accesibilidad/">
                                <i class="bi bi-universal-access-circle"></i> Accesibilidad
                            </a>
                        </li>

                        <li class="nav-item position-relative" id="campanaNotificacion">
                            <a href="#" class="nav-link notificacion-icono" id="toggleNotificaciones">
                                <i class="bi bi-bell-fill"></i>

                            </a>

                            <div class="notificacion-panel" id="panelNotificaciones">

                                <div class="notificacion-item text-center text-muted">Sin notificaciones</div>

                            </div>
                        </li>

                        <!-- Usuario -->

                        <li class="nav-item dropdown">
                            <a class="nav-link d-flex justify-content-between align-items-center" href="#">
                                <i class="bi bi-person-circle me-1"></i>admins
                                <i class="bi bi-chevron-down toggle-icon"></i>
                            </a>
                            <ul class="submenu">
                                <li>
                                    <a class="dropdown-item" href="/usuario/">
                                        <i class="bi bi-person"></i> Mi cuenta
                                    </a>
                                </li>
                                <li><a class="dropdown-item" href="/usuarios-logeados/">
                                        <i class="bi bi-people"></i> Usuarios logeados
                                    </a>
                                <li>
                                    <form action="/logout/" method="post">
                                        <input type="hidden" name="csrfmiddlewaretoken"
                                            value="gFIhMt9ESt18NpJV0GMfhw1r7rAt5bWhT9GOh6NyFNrXqU7Qy0vBDlU8IAG1YBuV">
                                        <button type="submit"
                                            class="dropdown-item bg-transparent border-0 text-start w-100">
                                            <i class="bi bi-box-arrow-right"></i> Cerrar sesión
                                        </button>
                                    </form>
                                </li>
                            </ul>
                        </li>



                    </ul>
                </div>
            </div>
        </nav>


        <div class="d-flex flex-column justify-content-center align-items-center text-center py-5">
            <div class="titulo-superpuesto">
                <h1 class="fw-bold text-white">EL DRAGÓN DEL VALLE IMPERIAL</h1>
            </div>
            <img src="/static/imagen/logo.png" alt="Logo" class="logo-img my-4" style="max-width: 300px; height: auto;">
            <div class="fecha-hora text-white" style="font-size: 1.2rem;">
                <p class="mb-1"> <strong>Fecha:</strong> <span id="fecha"></span></p>
                <p><strong>Hora:</strong> <span id="hora"></span></p>
            </div>
            <div class="mt-4 d-flex gap-3">
                <button id="mostrarComentariosBtn" class="btn btn-warning">Comentarios</button>
                <a href="https://www.google.com/maps?q=Illimani,+Bolivia" target="_blank"
                    class="btn btn-outline-primary">Ver Ubicación</a>
            </div>
        </div>


    </header>

    <main id="contenido-principal" class="contenido-superpuesto page-menuprin">

        <div id="blur-overlay"></div>
        <main class="container py-5" id="contenido-principal">

            <!-- MODAL GRANDE PARA COMENTARIOS -->
            <div id="comentariosModal" class="modal-overlay" style="display:none;">
                <div
                    class="modal-content frosted-glass comentarios-modal-content position-relative p-4 text-white rounded">
                    <button id="cerrarComentariosModal"
                        class="btn-close btn-close-white position-absolute top-0 end-0 m-3"
                        aria-label="Cerrar"></button>
                    <h3 class="mb-4">Opiniones de nuestros clientes</h3>




                    <div id="commentsCarousel" class="carousel slide" data-bs-ride="carousel">
                        <div class="carousel-inner">

                            <div class="carousel-item active" data-id="21">
                                <div class="comentario-card frosted-glass text-white p-4 shadow mx-auto d-flex align-items-start"
                                    style="max-width: 600px;">
                                    <div class="comentario-avatar me-3 flex-shrink-0 d-flex justify-content-center align-items-center rounded-circle bg-warning"
                                        style="width: 64px; height: 64px;">

                                        <i class="bi bi-person-fill" style="font-size: 2.5rem; color: white;"></i>

                                    </div>
                                    <div class="comentario-contenido flex-grow-1">
                                        <h5 class="card-title mb-1">alex</h5>
                                        <p class="card-text mb-2">buen servicio</p>
                                        <div class="text-warning mb-1">


                                            ★



                                            ★



                                            ★



                                            ★



                                            ★


                                        </div>
                                        <p class="fecha-hora-comentario text-muted" style="font-size: 0.85rem;">
                                            23/06/2025 10:10 PM
                                        </p>
                                    </div>

                                </div>
                            </div>

                            <div class="carousel-item " data-id="20">
                                <div class="comentario-card frosted-glass text-white p-4 shadow mx-auto d-flex align-items-start"
                                    style="max-width: 600px;">
                                    <div class="comentario-avatar me-3 flex-shrink-0 d-flex justify-content-center align-items-center rounded-circle bg-warning"
                                        style="width: 64px; height: 64px;">

                                        <i class="bi bi-person-fill" style="font-size: 2.5rem; color: white;"></i>

                                    </div>
                                    <div class="comentario-contenido flex-grow-1">
                                        <h5 class="card-title mb-1">miiguel</h5>
                                        <p class="card-text mb-2">SDFG</p>
                                        <div class="text-warning mb-1">


                                            ★



                                            ★



                                            ★



                                            ★



                                            ★


                                        </div>
                                        <p class="fecha-hora-comentario text-muted" style="font-size: 0.85rem;">
                                            21/06/2025 03:20 AM
                                        </p>
                                    </div>

                                </div>
                            </div>

                            <div class="carousel-item " data-id="19">
                                <div class="comentario-card frosted-glass text-white p-4 shadow mx-auto d-flex align-items-start"
                                    style="max-width: 600px;">
                                    <div class="comentario-avatar me-3 flex-shrink-0 d-flex justify-content-center align-items-center rounded-circle bg-warning"
                                        style="width: 64px; height: 64px;">

                                        <i class="bi bi-person-fill" style="font-size: 2.5rem; color: white;"></i>

                                    </div>
                                    <div class="comentario-contenido flex-grow-1">
                                        <h5 class="card-title mb-1">Armando</h5>
                                        <p class="card-text mb-2">Excelente Comida</p>
                                        <div class="text-warning mb-1">


                                            ★



                                            ★



                                            ★



                                            ★



                                            ★


                                        </div>
                                        <p class="fecha-hora-comentario text-muted" style="font-size: 0.85rem;">
                                            20/06/2025 04:34 PM
                                        </p>
                                    </div>

                                </div>
                            </div>

                            <div class="carousel-item " data-id="18">
                                <div class="comentario-card frosted-glass text-white p-4 shadow mx-auto d-flex align-items-start"
                                    style="max-width: 600px;">
                                    <div class="comentario-avatar me-3 flex-shrink-0 d-flex justify-content-center align-items-center rounded-circle bg-warning"
                                        style="width: 64px; height: 64px;">

                                        <i class="bi bi-person-fill" style="font-size: 2.5rem; color: white;"></i>

                                    </div>
                                    <div class="comentario-contenido flex-grow-1">
                                        <h5 class="card-title mb-1">Armando</h5>
                                        <p class="card-text mb-2">buena atencion</p>
                                        <div class="text-warning mb-1">


                                            ★



                                            ★



                                            ★



                                            ★



                                            ★


                                        </div>
                                        <p class="fecha-hora-comentario text-muted" style="font-size: 0.85rem;">
                                            20/06/2025 03:34 AM
                                        </p>
                                    </div>

                                </div>
                            </div>


                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#commentsCarousel"
                            data-bs-slide="prev">
                            <span class="carousel-control-prev-icon"></span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#commentsCarousel"
                            data-bs-slide="next">
                            <span class="carousel-control-next-icon"></span>
                        </button>
                    </div>


                    <form id="formEliminar" method="POST" class="mt-3" action="">
                        <input type="hidden" name="csrfmiddlewaretoken"
                            value="gFIhMt9ESt18NpJV0GMfhw1r7rAt5bWhT9GOh6NyFNrXqU7Qy0vBDlU8IAG1YBuV">
                        <button type="submit" class="btn btn-danger btn-sm">Eliminar comentario actual</button>
                    </form>



                    <div class="text-center mt-4">
                        <button id="abrirAgregarComentarioBtn" class="btn btn-warning">Comentar</button>
                    </div>
                </div>
            </div>

            <!-- MODAL PEQUEÑO PARA AGREGAR COMENTARIO -->
            <div id="comentarioModal" class="modal-overlay" style="display: none;">
                <div class="modal-content frosted-glass position-relative p-4 text-white rounded"
                    style="max-width: 500px;">
                    <button id="cerrarAgregarComentarioModal"
                        class="btn-close btn-close-white position-absolute top-0 end-0 m-3"
                        aria-label="Cerrar"></button>
                    <h3 class="mb-3">Agregar Comentario</h3>
                    <form method="POST" action="/agregar-comentario/">
                        <input type="hidden" name="csrfmiddlewaretoken"
                            value="gFIhMt9ESt18NpJV0GMfhw1r7rAt5bWhT9GOh6NyFNrXqU7Qy0vBDlU8IAG1YBuV">
                        <div class="star-rating mb-3">

                            <input type="radio" id="star5" name="puntuacion" value="5">
                            <label for="star5">★</label>

                            <input type="radio" id="star4" name="puntuacion" value="4">
                            <label for="star4">★</label>

                            <input type="radio" id="star3" name="puntuacion" value="3">
                            <label for="star3">★</label>

                            <input type="radio" id="star2" name="puntuacion" value="2">
                            <label for="star2">★</label>

                            <input type="radio" id="star1" name="puntuacion" value="1">
                            <label for="star1">★</label>

                        </div>
                        <input type="text" name="nombre" class="form-control mb-3" placeholder="Tu nombre" required>
                        <textarea name="texto" class="form-control mb-3" placeholder="Tu comentario"
                            required></textarea>
                        <div class="text-end">
                            <button type="submit" class="btn btn-warning">Enviar comentario</button>
                        </div>
                    </form>
                </div>
            </div>

        </main>

    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            function updateDateTime() {
                const now = new Date();
                const options = {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit',
                };

            }
            setInterval(updateDateTime, 1000);
            updateDateTime();
            const toggleLinks = document.querySelectorAll('[data-bs-toggle="collapse"]');
            toggleLinks.forEach(link => {
                const icon = link.querySelector('.toggle-icon');
                const targetId = link.getAttribute('href') || link.getAttribute('data-bs-target');
                const target = document.querySelector(targetId);

                if (icon && target) {
                    target.addEventListener('show.bs.collapse', () => {
                        icon.classList.remove('bi-chevron-down');
                        icon.classList.add('bi-chevron-up');
                    });
                    target.addEventListener('hide.bs.collapse', () => {
                        icon.classList.remove('bi-chevron-up');
                        icon.classList.add('bi-chevron-down');
                    });
                }
            });
        });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const dropdowns = document.querySelectorAll('.nav-item.dropdown');
            const blurOverlay = document.getElementById('blur-overlay');

            dropdowns.forEach(dropdown => {
                const submenu = dropdown.querySelector('.submenu');
                dropdown.addEventListener('mouseenter', () => {
                    if (submenu) {
                        blurOverlay.style.display = 'block';
                    }
                });
                dropdown.addEventListener('mouseleave', () => {
                    blurOverlay.style.display = 'none';
                });
            });
            blurOverlay.addEventListener('click', () => {
                blurOverlay.style.display = 'none';
                document.querySelectorAll('.submenu').forEach(sub => {
                    sub.style.display = 'none';
                });
            });
        });
    </script>

    <script>
        const toggle = document.getElementById("toggleNotificaciones");
        const panel = document.getElementById("panelNotificaciones");

        toggle.addEventListener("click", function (e) {
            e.preventDefault();
            panel.style.display = panel.style.display === "block" ? "none" : "block";

            if (panel.style.display === "block") {
                fetch("/notificaciones/leidas/", {
                    method: "POST",
                    headers: {
                        "X-CSRFToken": 'gFIhMt9ESt18NpJV0GMfhw1r7rAt5bWhT9GOh6NyFNrXqU7Qy0vBDlU8IAG1YBuV'
                    }
                }).then(() => {
                    const badge = document.querySelector(".notificacion-icono .badge");
                    if (badge) badge.remove();
                });
            }
        });

        document.addEventListener("click", function (e) {
            if (!toggle.contains(e.target) && !panel.contains(e.target)) {
                panel.style.display = "none";
            }
        });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            function updateDateTime() {
                const now = new Date();
                const formattedDate = now.toLocaleDateString('es-ES', {
                    weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
                });
                const formattedTime = now.toLocaleTimeString('es-ES', {
                    hour: '2-digit', minute: '2-digit', second: '2-digit'
                });

                const fecha = document.getElementById('fecha');
                const hora = document.getElementById('hora');
                if (fecha) fecha.textContent = formattedDate;
                if (hora) hora.textContent = formattedTime;
            }

            updateDateTime();
            setInterval(updateDateTime, 1000);

            const mostrarComentariosBtn = document.getElementById('mostrarComentariosBtn');
            const comentariosModal = document.getElementById('comentariosModal');
            const cerrarComentariosModalBtn = document.getElementById('cerrarComentariosModal');
            const abrirAgregarComentarioBtn = document.getElementById('abrirAgregarComentarioBtn');
            const comentarioModal = document.getElementById('comentarioModal');
            const cerrarAgregarComentarioModalBtn = document.getElementById('cerrarAgregarComentarioModal');
            const blurOverlay = document.getElementById('blur-overlay');

            const originalOverflow = document.body.style.overflow;
            const originalHeight = document.body.style.height;

            function isPageMenuPrin() {
                const main = document.getElementById('contenido-principal');
                return main && main.classList.contains('page-menuprin');
            }

            if (mostrarComentariosBtn) {
                mostrarComentariosBtn.addEventListener('click', () => {
                    comentariosModal.style.display = 'flex';
                    blurOverlay.style.display = 'block';
                    if (!isPageMenuPrin()) {
                        document.body.style.overflow = 'hidden';
                        document.body.style.height = '100vh';
                    }
                });
            }

            if (cerrarComentariosModalBtn) {
                cerrarComentariosModalBtn.addEventListener('click', () => {
                    comentariosModal.style.display = 'none';
                    blurOverlay.style.display = 'none';
                    if (!isPageMenuPrin()) {
                        document.body.style.overflow = originalOverflow;
                        document.body.style.height = originalHeight;
                    }
                });
            }

            if (abrirAgregarComentarioBtn) {
                abrirAgregarComentarioBtn.addEventListener('click', () => {
                    comentarioModal.style.display = 'flex';
                });
            }

            if (cerrarAgregarComentarioModalBtn) {
                cerrarAgregarComentarioModalBtn.addEventListener('click', () => {
                    comentarioModal.style.display = 'none';
                });
            }

            window.addEventListener('click', (e) => {
                if (e.target === comentariosModal) {
                    comentariosModal.style.display = 'none';
                    blurOverlay.style.display = 'none';
                    if (!isPageMenuPrin()) {
                        document.body.style.overflow = originalOverflow;
                        document.body.style.height = originalHeight;
                    }
                }
                if (e.target === comentarioModal) {
                    comentarioModal.style.display = 'none';
                }
            });

            const carousel = document.getElementById('commentsCarousel');
            const formEliminar = document.getElementById('formEliminar');
            if (carousel && formEliminar) {
                function actualizarAction() {
                    const activo = carousel.querySelector('.carousel-item.active');
                    if (activo) {
                        const comentarioId = activo.getAttribute('data-id');
                        formEliminar.action = `/comentario/eliminar/${comentarioId}/`;
                    }
                }
                actualizarAction();
                carousel.addEventListener('slid.bs.carousel', actualizarAction);
            }

            // Control scroll si page-menuprin al cargar página
            const main = document.getElementById('contenido-principal');
            if (main && main.classList.contains('page-menuprin')) {
                document.body.style.overflow = 'hidden';
                document.body.style.height = '100vh';
            } else {
                document.body.style.overflow = '';
                document.body.style.height = '';
            }
        });
    </script>

</body>

</html>